(()=>{"use strict";function e(e){return e>=0&&e<10?"0"+e:e}function t(e){const t=document.querySelector(e);t.classList.add("hide"),t.classList.remove("show"),document.body.style.overflow=""}function n(e,t){const n=document.querySelector(e);n.classList.add("show"),n.classList.remove("hide"),document.body.style.overflow="hidden",t&&clearInterval(t)}window.addEventListener("DOMContentLoaded",(function(){(function(){let e=document.querySelectorAll(".tabheader__item"),t=document.querySelectorAll(".tabcontent"),n=document.querySelector(".tabheader__items");function s(){t.forEach((e=>{e.classList.add("hide"),e.classList.remove("show","fade")})),e.forEach((e=>{e.classList.remove("tabheader__item_active")}))}function o(n=0){t[n].classList.add("show","fade"),t[n].classList.remove("hide"),e[n].classList.add("tabheader__item_active")}s(),o(),n.addEventListener("click",(function(t){const n=t.target;n&&n.classList.contains("tabheader__item")&&e.forEach(((e,t)=>{n==e&&(s(),o(t))}))}))})(),function(){class e{constructor(e,t,n,s,o,c,...a){this.src=e,this.alt=t,this.title=n,this.descr=s,this.price=o,this.parent=document.querySelector(c),this.classes=a,this.transfer=430,this.changeToTG()}changeToTG(){this.price=this.price*this.transfer}render(){const e=document.createElement("div");0==this.classes.length?e.classList.add("menu__item"):(e.classList.add("menu__item"),e.classList.add(this.classes)),e.innerHTML=`                \n                    <img src=${this.src} alt=${this.alt}>\n                    <h3 class="menu__item-subtitle">${this.title}</h3>\n                    <div class="menu__item-descr">${this.descr}</div>\n                    <div class="menu__item-divider"></div>\n                    <div class="menu__item-price">\n                        <div class="menu__item-cost">Цена:</div>\n                        <div class="menu__item-total"><span>${this.price}</span> тг/день</div>\n                    </div>\n                </div>\n            `,this.parent.append(e)}}(async function(e){const t=await fetch(e);if(!t.ok)throw new Error(`${e}, status:${t.status}`);return await t.json()})("http://localhost:3000/menu").then((t=>{t.forEach((({img:t,altimg:n,title:s,descr:o,price:c})=>{new e(t,n,s,o,c,".menu .container").render()}))}))}(),function(){const e=document.querySelector(".calculating__result span");let t,n,s,o="female",c=1.375,a=document.querySelector(`#${o}`),i=document.querySelector("#small");function r(){e.textContent=o&&t&&n&&s&&c?"male"==o?Math.round((88.36+13.4*n+4.8*t-5.7*s)*c):Math.round((447.6+9.2*n+3.1*t-4.3*s)*c):"____"}function l(e,t){document.querySelectorAll(`${e} div`).forEach((e=>{e.addEventListener("click",(e=>{e.target.getAttribute("data-ratio")?(c=e.target.getAttribute("data-ratio"),e.target.classList.add(t),i.classList.remove(t),i=e.target):(o=e.target.getAttribute("id"),e.target.classList.add(t),a.classList.remove(t),a=e.target),r()}))}))}function d(e){const o=document.querySelector(`#${e}`);o.addEventListener("input",(()=>{switch(e){case"height":t=o.value;break;case"weight":n=o.value;break;case"age":s=o.value}r()}))}r(),l(".calculating__choose_big","calculating__choose-item_active"),l("#gender","calculating__choose-item_active"),d("height"),d("weight"),d("age")}(),function(){function e(e){const s=document.querySelector(".modal__dialog"),o=document.createElement("div"),c=s.querySelector(".modal__content");c.classList.add("hide"),o.classList.add("modal__dialog","modal__content","show"),o.innerHTML=`\n            <div>\n                <div class="modal__close" data-close>&times;</div>\n                <div class="modal__title">${e}</div>\n            </div>\n            `,document.querySelector(".modal").append(o),n(".modal"),setTimeout((function(){c.classList.add("show"),c.classList.remove("hide"),o.remove(),t(".modal")}),2500)}document.querySelectorAll("form").forEach((t=>{var n;(n=t).addEventListener("submit",(t=>{t.preventDefault();const s=document.createElement("img");s.src="img/spinner.svg",s.style.cssText="\n                display: block;\n                margin: 0 auto;\n            ";const o=new FormData(n);n.insertAdjacentElement("afterend",s),async function(e,t){const n=await fetch("http://localhost:3000/requests",{method:"POST",headers:{"Content-type":"application/json"},body:t});return await n.json()}(0,JSON.stringify(Object.fromEntries(o.entries()))).then((t=>{console.log(t),e("Дождался! скоро свяжемся, жди)")})).catch((()=>{e("Хрень какая-то.....")})).finally((()=>{s.remove(),n.reset()}))}))}))}(),function(){const e=document.querySelector(".btn_dark"),s=document.querySelector(".btn_white"),o=document.querySelector(".modal");e.addEventListener("click",(()=>n(".modal"))),s.addEventListener("click",(()=>n(".modal"))),o.addEventListener("click",(e=>{e.target!==o&&""!=e.target.getAttribute("data-close")||t(".modal")})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&o.classList.contains("show")&&t(".modal")}));const c=setTimeout((()=>n(".modal",c)),5e4);window.addEventListener("scroll",(function e(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(n(".modal"),window.removeEventListener("scroll",e))}))}(),function(){const t=document.querySelector(".offer__slider-prev"),n=document.querySelector(".offer__slider-next"),s=document.createElement("img"),o=document.createElement("img"),c=document.querySelector("#current"),a=document.querySelector("#total"),i=document.querySelector(".offer__slide"),r=document.querySelector(".offer__slider"),l=document.createElement("div"),d=(document.createElement("img"),window.getComputedStyle(i).width),u=document.createElement("ol");s.src="icons/left.svg",s.alt="prev",o.src="icons/right.svg",o.alt="next",t.innerHTML="",t.append(s),n.innerHTML="",n.append(o),c.textContent="01",a.textContent="10",i.innerHTML="",i.append(l),i.style.overflow="hidden",l.style.display="flex",l.style.transition="0.5s all",r.style.position="relative",u.classList.add("carousel-indicators"),r.append(u);let m,h,f=1,v=[],_=0,g=[];function y(){l.style.transform=`translateX(-${_}px)`,c.textContent=e(f),g[h].style.opacity="0.5",h=f-1,g[h].style.opacity="1"}(async function(e){const t=await fetch(e);if(!t.ok)throw new Error(`${e}, status:${t.status}`);return await t.json()})("http://localhost:3000/slider-img").then((t=>{m=t.length,a.textContent=e(m),l.style.width=100*t.length+"%",t.forEach(((e,t)=>{const n=document.createElement("li");n.classList.add("dot"),n.setAttribute("data-slide",t),u.append(n),g.push(n),0==t&&(n.style.opacity="1",h=n.getAttribute("data-slide")),v.push(e),l.innerHTML+=`\n            <div class="offer__slide" style='width: ${d};'>\n                <img src="${e.src}" alt="${e.altimg}">\n            </div>\n            `}))})),u.addEventListener("click",(t=>{t.target.getAttribute("data-slide")&&(g[h].style.opacity="0.5",h=t.target.getAttribute("data-slide"),g[h].style.opacity="1",_=+d.slice(0,d.length-2)*h,f=+h+1,c.textContent=e(f),l.style.transform=`translateX(-${_}px)`)})),n.addEventListener("click",(()=>{_==+d.replace(/\D/g,"")*(v.length-1)?(_=0,f=1):(_+=+d.replace(/\D/g,""),f++),y()})),t.addEventListener("click",(()=>{f--,f<1?(_=+d.replace(/\D/g,"")*(v.length-1),f=4):_-=+d.replace(/\D/g,""),y()}))}(),function(e){const t=new Date(Date.parse(e)),n=document.querySelector(".promotion__descr");function s(e){return e>=0&&e<10?"0"+e:e}["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"].forEach(((e,s)=>{t.getMonth()==s&&(n.innerHTML=`\n        <div class="promotion__descr">\n            Мы ценим каждого клиента и предлагаем вам стать одним из них на очень выгодных условиях. \n            Каждому, кто закажет доставку питание на неделю, будет предоставлена скидка в размере <span>20%!</span>\n            <br><br>\n            Акция закончится ${t.getUTCDate()} ${e} в 00:00\n         </div>\n        `)})),function(e,t){const n=document.querySelector(".timer"),o=n.querySelector("#days"),c=n.querySelector("#hours"),a=n.querySelector("#minutes"),i=n.querySelector("#seconds"),r=setInterval(l,1e3);function l(){const e=function(e){const t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/864e5),s=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60);return{total:t,days:n,hours:Math.floor(t/36e5%24),minutes:o,seconds:s}}(t);o.innerHTML=s(e.days),c.innerHTML=s(e.hours),a.innerHTML=s(e.minutes),i.innerHTML=s(e.seconds),e.total<=0&&clearInterval(r)}l()}(0,e)}("2021-08-05")}))})();
//# sourceMappingURL=bundle.js.map